<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/layout}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>λ§μ΄νμ΄μ§€ - CULTI</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    
    <link rel="stylesheet" th:href="@{/css/myPage.css}">
    
    <script th:src="@{/js/myPage.js}"></script>
</head>
<body>
    <div layout:fragment="content">

    <!-- λ©”μΈ μ»¨ν…μΈ  -->
    <main class="main">
        <div class="container">
            <div class="mypage-layout">
                <!-- μ‚¬μ΄λ“λ°” -->
                <aside class="sidebar">
                    <div class="user-profile">
                        <div class="profile-image" id="profileImage">
                            <img src="" alt="ν”„λ΅ν•„" id="profileImg">
                            <div class="profile-image-placeholder">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                            </div>
                        </div>
                        <div class="user-info">
                            <h2 class="user-name" id="userName" th:text="${user.name}">ν™κΈΈλ™</h2>
                            <p class="user-email" id="userEmail" th:text="${user.email}">hong@example.com</p>
                        </div>
                        <div class="user-grade">
                            <span class="grade-badge">μΌλ°νμ›</span>
                        </div>
                    </div>

                    <nav class="sidebar-nav">
                        <button class="nav-item active" data-tab="dashboard">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                            <span>λ€μ‹λ³΄λ“</span>
                        </button>
                        <button class="nav-item" data-tab="reservations">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            <span>μλ§¤ λ‚΄μ—­</span>
                        </button>
                        <button class="nav-item" data-tab="benefits">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 6v6l4 2"></path>
                            </svg>
                            <span>μΏ ν°/ν¬μΈνΈ</span>
                        </button>
                        <button class="nav-item" data-tab="favorites">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                            </svg>
                            <span>μ° λ©λ΅</span>
                        </button>
                        <button class="nav-item" data-tab="cancellations">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="15" y1="9" x2="9" y2="15"></line>
                                <line x1="9" y1="9" x2="15" y2="15"></line>
                            </svg>
                            <span>μ·¨μ†/ν™λ¶ λ‚΄μ—­</span>
                        </button>
                        <button class="nav-item" data-tab="profile">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span>νμ›μ •λ³΄ μμ •</span>
                        </button>
                    </nav>
                </aside>

                <!-- λ©”μΈ μ»¨ν…μΈ  μμ—­ -->
                <div class="content">
                    <!-- λ€μ‹λ³΄λ“ -->
                    <section class="tab-content active" id="dashboard">
                        <h1 class="content-title">λ€μ‹λ³΄λ“</h1>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">π«</div>
                                <div class="stat-info">
                                    <span class="stat-label">μλ§¤ ν‹°μΌ“</span>
                                    <span class="stat-value" id="ticketCount">3</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">π</div>
                                <div class="stat-info">
                                    <span class="stat-label">λ³΄μ  μΏ ν°</span>
                                    <span class="stat-value" id="couponCount">5</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">β­</div>
                                <div class="stat-info">
                                    <span class="stat-label">ν¬μΈνΈ</span>
                                    <span class="stat-value" id="pointCount">15,000P</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">β¤οΈ</div>
                                <div class="stat-info">
                                    <span class="stat-label">μ° λ©λ΅</span>
                                    <span class="stat-value" id="favoriteCount">12</span>
                                </div>
                            </div>
                        </div>

                        <div class="recent-section">
                            <h2 class="section-title">μµκ·Ό μλ§¤ λ‚΄μ—­</h2>
                            <div class="reservation-list" id="recentReservations">
                                <!-- JavaScriptλ΅ λ™μ  μƒμ„± -->
                            </div>
                        </div>
                    </section>

                    <!-- μλ§¤ λ‚΄μ—­ -->
                    <section class="tab-content" id="reservations">
                        <h1 class="content-title">μλ§¤ λ‚΄μ—­</h1>
                        
                        <div class="filter-tabs">
                            <button class="filter-tab active" data-filter="all">μ „μ²΄</button>
                            <button class="filter-tab" data-filter="movie">μν™”</button>
                            <button class="filter-tab" data-filter="exhibition">μ „μ‹</button>
                            <button class="filter-tab" data-filter="performance">κ³µμ—°</button>
                        </div>

                        <div class="reservation-list" id="allReservations">
                            <!-- JavaScriptλ΅ λ™μ  μƒμ„± -->
                        </div>
                    </section>

                    <!-- μΏ ν°/ν¬μΈνΈ -->
                    <section class="tab-content" id="benefits">
                        <h1 class="content-title">μΏ ν°/ν¬μΈνΈ</h1>
                        
                        <div class="benefits-tabs">
                            <button class="benefit-tab active" data-benefit="coupons">μΏ ν°</button>
                            <button class="benefit-tab" data-benefit="points">ν¬μΈνΈ</button>
                        </div>

                        <div class="benefit-content">
                            <div class="benefit-section active" id="coupons">
                                <div class="coupon-list" id="couponList">
                                    <!-- JavaScriptλ΅ λ™μ  μƒμ„± -->
                                </div>
                            </div>

                            <div class="benefit-section" id="points">
                                <div class="point-summary">
                                    <div class="point-card">
                                        <h3>λ³΄μ  ν¬μΈνΈ</h3>
                                        <p class="point-amount">15,000 P</p>
                                    </div>
                                    <div class="point-card">
                                        <h3>μ†λ©Έ μμ • ν¬μΈνΈ</h3>
                                        <p class="point-amount expiring">3,000 P</p>
                                        <span class="expiry-date">2026.03.31 μ†λ©Έ</span>
                                    </div>
                                </div>

                                <h3 class="subsection-title">ν¬μΈνΈ λ‚΄μ—­</h3>
                                <div class="point-list" id="pointList">
                                    <!-- JavaScriptλ΅ λ™μ  μƒμ„± -->
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- μ° λ©λ΅ -->
                    <section class="tab-content" id="favorites">
                        <h1 class="content-title">μ° λ©λ΅</h1>
                        
                        <div class="favorites-grid" id="favoritesList">
                            <!-- JavaScriptλ΅ λ™μ  μƒμ„± -->
                        </div>
                    </section>

                    <!-- μ·¨μ†/ν™λ¶ λ‚΄μ—­ -->
                    <section class="tab-content" id="cancellations">
                        <h1 class="content-title">μ·¨μ†/ν™λ¶ λ‚΄μ—­</h1>
                        <div class="reservation-list" id="cancellationList">
                            <!-- JavaScriptλ΅ λ™μ  μƒμ„± -->
                        </div>
                    </section>

                    <!-- νμ›μ •λ³΄ μμ • -->
                    <section class="tab-content" id="profile">
                        <h1 class="content-title">νμ›μ •λ³΄ μμ •</h1>
                        
                        <form class="profile-form" id="profileForm">
                            <div class="form-section">
                                <h3 class="form-section-title">κΈ°λ³Έ μ •λ³΄</h3>
                                
                                <div class="form-group">
                                    <label for="profileName">μ΄λ¦„</label>
                                    <input type="text" id="profileName" th:value="${user.name}" disabled>
                                    <span class="form-help">μ΄λ¦„μ€ λ³€κ²½ν•  μ μ—†μµλ‹λ‹¤.</span>
                                </div>

                                <div class="form-group">
                                    <label for="profileNickname">λ‹‰λ„¤μ„</label>
                                    <input type="text" id="profileNickname" th:value="${user.nickname}">
                                </div>

                                <div class="form-group">
                                    <label for="profileEmail">μ΄λ©”μΌ</label>
                                    <input type="email" id="profileEmail" th:value="${user.email}" disabled>
                                    <span class="form-help">μ΄λ©”μΌμ€ λ³€κ²½ν•  μ μ—†μµλ‹λ‹¤.</span>
                                </div>

                                <div class="form-group">
                                    <label for="profilePhone">μ „ν™”λ²νΈ</label>
                                    <input type="tel" id="profilePhone" th:value="${user.phone}">
                                </div>

                                <div class="form-group">
                                    <label for="profileBirth">μƒλ…„μ›”μΌ</label>
                                    <input type="date" id="profileBirth" th:value="${user.birthDate}">
                                </div>

                                <div class="form-group">
                                    <label>μ„±λ³„</label>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="gender" value="male" checked>
                                            <span>λ‚¨μ„±</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="gender" value="female">
                                            <span>μ—¬μ„±</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="gender" value="other">
                                            <span>μ„ νƒμ•ν•¨</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 class="form-section-title">λΉ„λ°€λ²νΈ λ³€κ²½</h3>
                                
                                <div class="form-group">
                                    <label for="currentPassword">ν„μ¬ λΉ„λ°€λ²νΈ</label>
                                    <input type="password" id="currentPassword" placeholder="ν„μ¬ λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•μ„Έμ”">
                                </div>

                                <div class="form-group">
                                    <label for="newPassword">μƒ λΉ„λ°€λ²νΈ</label>
                                    <input type="password" id="newPassword" placeholder="μƒ λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•μ„Έμ”">
                                </div>

                                <div class="form-group">
                                    <label for="confirmPassword">μƒ λΉ„λ°€λ²νΈ ν™•μΈ</label>
                                    <input type="password" id="confirmPassword" placeholder="μƒ λΉ„λ°€λ²νΈλ¥Ό λ‹¤μ‹ μ…λ ¥ν•μ„Έμ”">
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">μ €μ¥ν•κΈ°</button>
                                <button type="button" class="btn btn-secondary" id="cancelEdit">μ·¨μ†</button>
                            </div>
                        </form>

                        <div class="danger-zone">
                            <h3 class="danger-title">νμ› νƒν‡΄</h3>
                            <p class="danger-description">νμ› νƒν‡΄ μ‹ λ¨λ“  μ •λ³΄κ°€ μ‚­μ λλ©° λ³µκµ¬ν•  μ μ—†μµλ‹λ‹¤.</p>
                            <button class="btn btn-danger" id="deleteAccountBtn">νμ› νƒν‡΄</button>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>


    <!-- νμ› νƒν‡΄ ν™•μΈ λ¨λ‹¬ -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-container modal-small">
            <div class="modal-header">
                <h2>νμ› νƒν‡΄</h2>
                <button type="button" class="modal-close" id="closeDeleteModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-warning">μ •λ§λ΅ νƒν‡΄ν•μ‹κ² μµλ‹κΉ?</p>
                <p class="modal-description">νƒν‡΄ μ‹ λ¨λ“  μλ§¤ λ‚΄μ—­, ν¬μΈνΈ, μΏ ν°μ΄ μ‚­μ λλ©° λ³µκµ¬ν•  μ μ—†μµλ‹λ‹¤.</p>
                <div class="form-group">
                    <label for="deletePassword">λΉ„λ°€λ²νΈ ν™•μΈ</label>
                    <input type="password" id="deletePassword" placeholder="λΉ„λ°€λ²νΈλ¥Ό μ…λ ¥ν•μ„Έμ”">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDelete">μ·¨μ†</button>
                <button type="button" class="btn btn-danger" id="confirmDelete">νƒν‡΄ν•κΈ°</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>